function init(){$("#goNext,#guess button").attr("disabled","disabled"),isAndroidIOS()?app.pokerGameInit(anyNum):window.webkit.messageHandlers.pokerGameInit.postMessage(anyNum)}function pokerName(e,t){var a,s,o;switch(e){case"H":s="红桃";break;case"S":s="黑桃";break;case"C":s="梅花";break;case"D":s="方块"}switch(t){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:o="&nbsp;"+t;break;case 10:o=t;break;case 11:o="&nbsp;J";break;case 12:o="&nbsp;Q";break;case 13:o="&nbsp;K"}return a=s+o}function LevelContent(e){var t;switch(e){case 1:t="【第一轮】 ";break;case 2:t="【第二轮】 ";break;case 3:t="【第三轮】 ";break;case 4:t="【第四轮】 ";break;case 5:t="【第五轮】 ";break;case 6:t="【第六轮】 ";break;case 7:t="【第七轮】 ";break;case 8:t="【第八轮】 ";break;case 9:t="【第九轮】 ";break;case 10:t="【第十轮】 ";break;case 11:t="【第十一轮】 ";break;case 12:t="【第十二轮】 "}return t}function belt(e){var t;switch(e){case 1:t=" 大 ";break;case 2:t=" 小 ";break;case 3:t=" 红 ";break;case 4:t=" 黑 "}return t}function RotateJack(e){$("#bgJack").transition({transform:"rotateY(360deg)"},1e3,"in-out"),setTimeout(function(){$("#bgJack").css({border:"none"}).find("img").attr("src",e)},200)}function RotateListImg(e,t){$("#gameLevel li").eq(t).find(".level-item .pic").transition({transform:"rotateY(360deg)"},800,"in-out").find("img").attr("src",e)}function JackMove(){$("#bgJack").transition({transform:"translate(2.44rem,0.44rem) scale(0.763,0.769)"},1e3,"ease")}function MoveEnd(){$("#bgJack").hide().find("img").css({opacity:0}).attr("src",urlStr+"/JackBack.png")}function ImgOpacity(){$("#bgJack").removeAttr("style"),$("#bgJack img").transition({opacity:1},200,"in-out")}function nextLevel(e,t,a,s){$(".guessWarn").hide(),$("#warnText").show(),RotateListImg(t,a),RotateJack(e),$("#guessNext").attr("disabled","disabled"),setTimeout(JackMove(),1100),setTimeout(function(){$("#smallJack").show().find("img").attr("src",e),MoveEnd(),ImgOpacity(),13===s?($("#toBig").attr("disabled","disabled").attr("isBan","ban").find(".guessBtn div").css({color:"#50476a"}),"ban"===$("#toSmall").attr("isBan")&&$("#toSmall").removeAttr("isBan"),$("#toSmall,#toRed,#toBlack").removeAttr("disabled")):1===s?($("#toSmall").attr("disabled","disabled").attr("isBan","ban").find(".guessBtn div").css({color:"#50476a"}),"ban"===$("#toBig").attr("isBan")&&$("#toBig").removeAttr("isBan"),$("#toBig,#toRed,#toBlack").removeAttr("disabled")):$("#guess button").removeAttr("disabled")},2200)}function createList(e,t,a,s){var o=$("#list").html();o=o.replace("{{getType}}",t),o=o.replace("{{src}}",a),o=o.replace("{{beansNum}}",showBeans(s,!1));var n=o;e.html(""),e.append(n)}function createChip(e){var t=$("#betList").html();t=t.replace("{{val}}",e),t=t.replace("{{src}}",urlStr+"/chip"+e+".png");var a=t;$("#chips").append(a)}function userGoldAll(e){$("#BeansNum").html(showBeans(e,!0))}function createRecordList(e,t,a,s,o,n){var i=$("#forRecordList").html();i=i.replace("{{id}}",e),i=i.replace("{{date}}",t),i=i.replace("{{second}}",a),i=i.replace("{{recordContent}}",s),i=i.replace("{{recordName}}",o),n>0?n="共中"+n+"金豆":n<=0&&(n="未中奖"),i=i.replace("{{recordGet}}",n);var r=i;$("#recordList").append(r)}function createRoundContent(e,t){var a=$("#forRoundContent").html();a=a.replace("{{content}}",e);var s=a;t.append(s)}function isAndroidIOS(){var e=navigator.userAgent,t=e.indexOf("Android")>-1||e.indexOf("Adr")>-1||e.indexOf("Linux")>-1,a=!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)||e.indexOf("iPad")>-1||e.indexOf("iPhone")>-1||e.indexOf("Mac OS")>-1;return!!t||!a&&void 0}function showBeans(e,t){return e<1e3?e=e:e<1e4?e=(Math.floor(e/100)%10===0?Math.floor(e/100)/10+".0":Math.floor(e/100)/10)+"K":e<1e5?e=(Math.floor(e/1e3)%10===0?Math.floor(e/1e3)/10+".0":Math.floor(e/1e3)/10)+"W":e<1e16&&(e=t?(Math.floor(e/1e3)%10===0?Math.floor(e/1e3)/10+".0":Math.floor(e/1e3)/10)+"W":Math.floor(e/1e4)+"W"),e}function addAward(e){var t=[],a=[];for(var s in e)t.push(s),a.push(e[s]);for(var o=0;o<t.length;o++)$("#gameLevel li").eq(clickIndex-t[o]).html("加奖"+100*a[o]+"%")}function addDisabled(e){13===e?$("#toBig").attr("disabled","disabled").attr("isBan","ban").find(".guessBtn div").css({color:"#50476a"}):1===e&&$("#toSmall").attr("disabled","disabled").attr("isBan","ban").find(".guessBtn div").css({color:"#50476a"})}var clickIndex=$("#gameLevel li").length-1,betNum=0,initLevel=clickIndex,guessVal,anyNum=1,UserBeans,recordPage=1,pagecount=1,isGameGo=!1,isGuess=!1,isMaxBeanShow=!1,strImgSrc=$("#shareToWechat .share-icon img").attr("src"),urlStr;urlStr=isAndroidIOS()?"http:"+strImgSrc.substring(0,strImgSrc.lastIndexOf("/")):"https:"+strImgSrc.substring(0,strImgSrc.lastIndexOf("/")),init(),function(){for(var e=$("html").children(),t=0;t<e.length;t++)"广告"===e[t].innerHTML&&(e[t].parents("div").remove(),e[t].parents("iframe").remove())}(),$("#wager #chips").on("click",".bet",function(){var e=parseInt($(this).attr("val"));betNum=e,$(this).find("img").transition({width:"100%"},200,"in-out"),$(this).siblings(".bet").find("img").transition({width:"85%"},200,"in-out");var t=betNum;$("#gameLevel li").eq(initLevel).find(".level-item .beansNum").html(showBeans(t,!1)+"豆"),$("#letGo").removeAttr("disabled")}),$("#guess button").click(function(){$(this).css({background:"rgba(98, 82, 144, 0.6)"}).siblings("button").css({background:"#342857"}).find(".guessBtn div").css({color:"#9e85e7"}),$(this).find(".guessBtn div").css({color:"#fff"}),"ban"===$("#toBig").attr("isBan")?$("#toBig").find(".guessBtn div").css({color:"#50476a"}):"ban"===$("#toSmall").attr("isBan")&&$("#toSmall").find(".guessBtn div").css({color:"#50476a"}),isGuess=!0,$("#goNext").removeAttr("disabled"),"toBig"===this.id?guessVal=1:"toSmall"===this.id?guessVal=2:"toRed"===this.id?guessVal=3:"toBlack"===this.id&&(guessVal=4)}),$("#goNext").click(function(){$("#guess button").removeAttr("style").removeAttr("isBan").attr("disabled","disabled"),$("#closeGame").removeAttr("disabled"),$(this).attr("disabled","disabled"),initLevel--,$("#guess button").css({background:"#342857"}).find(".guessBtn div").css({color:"#9e85e7"}),isAndroidIOS()?app.pokerGameContinue(guessVal):window.webkit.messageHandlers.pokerGameContinue.postMessage(guessVal),isGuess=!1}),$("#closeGame").click(function(){$("#guess button,#goNext").attr("disabled","disabled"),$(this).attr("disabled","disabled"),Play.bingoGame=!1,initLevel===clickIndex&&$("#notStart").show(),isAndroidIOS()?app.pokerGameOver(anyNum):window.webkit.messageHandlers.pokerGameOver.postMessage(anyNum)}),$("#backHome #quitGame").bind("click",function(){$(this).attr("disabled","disabled"),$("#backHome").hide(),Play.bingoGame=!1,isAndroidIOS()?app.pokerGameOver(anyNum):window.webkit.messageHandlers.pokerGameOver.postMessage(anyNum)}),$("#maxGoldBean #maxGoldBeanClose").bind("click",function(){$(this).attr("disabled","disabled"),$("#maxGoldBean").hide(),Play.bingoGame=!1,isAndroidIOS()?app.pokerGameOver(anyNum):window.webkit.messageHandlers.pokerGameOver.postMessage(anyNum)}),$("#backHome #returnGame").click(function(){$("#goNext,#guessNext #closeGame").removeAttr("disabled"),$("#backHome").hide(),"ban"===$("#toBig").attr("isBan")?($("#toBig").find(".guessBtn div").css({color:"#50476a"}),$("#toSmall,#toRed,#toBlack").removeAttr("disabled")):"ban"===$("#toSmall").attr("isBan")?($("#toSmall").find(".guessBtn div").css({color:"#50476a"}),$("#toBig,#toRed,#toBlack").removeAttr("disabled")):$("#guess button").removeAttr("disabled")}),$("#notStart .backGame").bind("click",function(){$("#notStart").hide(),$("#letGo,#guessNext #closeGame,#guess button").removeAttr("disabled"),isGuess&&$("#goNext").removeAttr("disabled"),"ban"===$("#toBig").attr("isBan")?($("#toBig").find(".guessBtn div").css({color:"#50476a"}),$("#toSmall,#toRed,#toBlack").removeAttr("disabled")):"ban"===$("#toSmall").attr("isBan")?($("#toSmall").find(".guessBtn div").css({color:"#50476a"}),$("#toBig,#toRed,#toBlack").removeAttr("disabled")):$("#guess button").removeAttr("disabled")}),$("#settlgame .settlgame-btn .reStartGame").click(function(){isAndroidIOS()?app.OneMoreHand(anyNum):window.webkit.messageHandlers.OneMoreHand.postMessage(anyNum)}),$("#reStart-btn").click(function(){isAndroidIOS()?app.OneMoreHand(anyNum):window.webkit.messageHandlers.OneMoreHand.postMessage(anyNum)}),$("#recordList").on("click",".record-item .recordList-btn",function(){var e,t=$(this).parent(".record-item").attr("id"),a="#"+t,s=t.length;t=t.substring(7,s);var o=parseInt(t),n=$(a).find(".round-content"),i=$(a).find(".recordList-btn"),r=n.attr("isHaveData");i.hasClass("toDown")&&(e=!0),i.hasClass("toUp")&&(e=!1),e?(n.show(),i.toggleClass("toUp").toggleClass("toDown")):(n.hide(),i.toggleClass("toUp").toggleClass("toDown")),r||(n.attr("isHaveData",!0),isAndroidIOS()?app.pokerGameRecordInfo(o):window.webkit.messageHandlers.pokerGameRecordInfo.postMessage(o))}),$(".share-btn").click(function(){var e=urlStr+"/share-poker.jpg";isAndroidIOS()?app.jumpSharePopupWindow(e):window.webkit.messageHandlers.jumpSharePopupWindow.postMessage(anyNum)}),$("#addBeans").click(function(){isAndroidIOS()?app.jumpRecharge(UserBeans):window.webkit.messageHandlers.jumpRecharge.postMessage(UserBeans)}),$("#conversion").click(function(){isAndroidIOS()?app.jumpGiftCenter(anyNum):window.webkit.messageHandlers.jumpGiftCenter.postMessage(anyNum)}),$(".stepOutGame").click(function(){isAndroidIOS()?app.temporaryExit(anyNum):window.webkit.messageHandlers.temporaryExit.postMessage(anyNum)}),$("#recharge #goBackGame").click(function(){$("#recharge").hide(),$("#letGo").removeAttr("disabled")}),$("#recharge #forRecharge").click(function(){$("#recharge").hide(),$("#letGo").removeAttr("disabled"),isAndroidIOS()?app.jumpRecharge(UserBeans):window.webkit.messageHandlers.jumpRecharge.postMessage(UserBeans)});var Play={outBeans:null,putBeans:null,bingoGame:!0,initGame:function(e){function t(e,t){for(var a=0;a<t;a++)createChip(e[a]),$("#chips .bet").css({background:"#272139"}),$("#chips .bet").eq(0).css({marginLeft:"0.50rem"}).siblings(".bet").css({marginLeft:"0.20rem"}),a===n?($("#chips .bet").eq(a).find("img").css({width:"100%"}),betNum=e[a],createList($("#gameLevel li").eq(initLevel),"投",urlStr+"/JackBack.png",e[a])):$("#chips .bet").eq(a).find("img").css({width:"85%"});$("#wager").show(),$("#guessNext").hide()}if(e.success){var a=e.goldAllBean,s=e.vpbeltchip,o=s.length,n=e.beltNum;if(addAward(e.vpexreward),void 0===a)t(s,o),$("#addBeans").unbind("click"),$("#BeansNum").html("未登录").click(function(){isAndroidIOS()?app.toLoginBackRefresh():window.webkit.messageHandlers.toLoginBackRefresh.postMessage(anyNum)}),$("#letGo,#chips .bet").click(function(){isAndroidIOS()?app.toLoginBackRefresh():window.webkit.messageHandlers.toLoginBackRefresh.postMessage(anyNum)});else if(UserBeans=a,userGoldAll(a),$("#letGo").click(function(){isAndroidIOS()?app.pokerGameBegin(betNum):window.webkit.messageHandlers.pokerGameBegin.postMessage(betNum)}),isAndroidIOS()?app.pokerGameRecord(recordPage):window.webkit.messageHandlers.pokerGameRecord.postMessage(recordPage),null===e.guessHistory)t(s,o);else{isGameGo=!0,$("#guess button").removeAttr("disabled");var i=e.guessHistory,r=i.length,d=i[r-1].odds,l=d.length;initLevel=clickIndex-r+1,$("#wager").hide(),$("#guessNext").show(),$(".guessWarn").hide();for(var c=0;c<r;c++){var u=clickIndex-c,m=urlStr+"/Jack/"+i[c].mark+" ("+i[c].point+").png",g=urlStr+"/Jack/"+i[c].mark+"s ("+i[c].point+").png",b=0===c?"投":"得";createList($("#gameLevel li").eq(u),b,g,i[c].goldBean),0===c?($("#warnText").show(),Play.putBeans=i[0].goldBean):($("#warnText").show().html("恭喜获得"+i[r-1].goldBean+"豆").css({color:"#fecb02"}),this.outBeans=i[r-1].goldBean,addDisabled(i[r-1].point))}for(var c=0;c<l;c++)$(".odds").eq(c).html(d[c]);$("#smallJack").show().find("img").attr("src",m)}}},getRoundContent:function(e){if(e.success)for(var t,a,s,o,n,i,r,d=e.detailList,l="#roundId"+e.roundId,c=$(l).find(".round-content"),u=d.length,m=0;m<u;m++)if(a=d[m].chapterNum,s=d[m].mark,o=d[m].point,n=d[m].odds,r=d[m].beltOn,i=d[m].isEnd,0===a?t="【首发牌】 "+pokerName(s,o):(0!==n&&0!==i||(n=" 猜错",t=LevelContent(a)+pokerName(s,o)+n),n>0&&0!==i&&(n="奖励: "+n+"倍",t=LevelContent(a)+pokerName(s,o)+belt(r)+n)),createRoundContent(t,c),0!==n&&1===i){var g=LevelContent(a+1)+"结算";g="<li>"+g+"</li>",c.find("li").eq(u-1).after(g)}},getRecordList:function(e){if(e.success&&(pagecount=e.page.pagecount,pagecount>0)){$(".recordSeat").remove();for(var t,a,s,o,n,i,r=e.logList,d=e.page.pageon,l=r.length,c=0;c<l;c++){t="roundId"+r[c].roundId,a=r[c].roundDate,a=a.toString(),a=a.substring(0,4)+"-"+a.substring(4,6)+"-"+a.substring(6,8),s=new Date(r[c].roundTime);var u=s.getMinutes();u<10&&(u="0"+u);var m=s.getHours(),g=m+":"+u;o=r[c].beltCount,o="共投"+o+"金豆",n="欢乐扑克",i=r[c].obtainCount,createRecordList(t,a,g,o,n,i),i>0&&($("#recordList .record-item").eq(c+10*(d-1)).find(".recordGet").css({color:"#ffcc00"}),$("#recordList .record-item").eq(c+10*(d-1)).find(".record-icon").addClass("win-icon"))}}},postBetNum:function(e){if(e.success){isGameGo=!0,$("#wager").hide(),$("#guessNext").show();var t=urlStr+"/Jack/"+e.poker.mark+" ("+e.poker.point+").png",a=urlStr+"/Jack/"+e.poker.mark+"s ("+e.poker.point+").png";addDisabled(e.poker.point);var s=e.poker.odds,o=e.goldAllBean;UserBeans=o,userGoldAll(o);for(var n=s.length,i=0;i<n;i++)$(".odds").eq(i).html(s[i]);nextLevel(t,a,initLevel,e.poker.point)}else $("#letGo").attr("disabled","disabled"),e.balnotenough&&$("#recharge").show()},guessNextJack:function(e){if(e.success){var t=urlStr+"/Jack/"+e.nextPoker.mark+" ("+e.nextPoker.point+").png",a=e.nextPoker.odds,s=a.length;addDisabled(e.nextPoker.point);for(var o=0;o<s;o++)$(".odds").eq(o).html(a[o]);var n=e.nextPoker.goldBean,i=urlStr+"/Jack/"+e.nextPoker.mark+"s ("+e.nextPoker.point+").png",r=e.beltBean;this.outBeans=n,Play.putBeans=r,e.perfect?(RotateJack(t),createList($("#gameLevel li").eq(initLevel),"得",i,n),$("#settlgame").show(),$("#putIn-beans span").html(r),$("#output-beans span").html(n),$(".userLevel").html("人品爆发,闯关成功!"),$("#goNext,#guess button").attr("disabled","disabled"),this.bingoGame=!1):e.bingo?(createList($("#gameLevel li").eq(initLevel),"得",i,n),nextLevel(t,i,initLevel,e.nextPoker.point),setTimeout(function(){$("#warnText").html("恭喜获得"+n+"豆").css({color:"#fecb02"})},1200),this.bingoGame=!0):(RotateJack(t),setTimeout(function(){$(".guessWarn,#warnText").hide(),$(".loseWarn").show()},1600),$("#goNext,#guess button,#closeGame").attr("disabled","disabled"),this.bingoGame=!1)}else e.onMaxGoldBean&&($("#maxGoldBean").show(),isMaxBeanShow=!0,$("#goNext").css({backgroundColor:"#6e6e6e"}),$("#goNext,#guessNext #closeGame,#guess button,#goNext").attr("disabled","disabled"))},settlgame:function(e){if(e.success){var t=e.level;if(e.success&&0!==t){$("#settlgame").show();var a=e.beltBean,s=e.goldBean,o=e.goldAllBean;$("#putIn-beans span").html(a),$("#output-beans span").html(s),t===clickIndex?$(".userLevel").html("人品爆发,闯关成功！"):$(".userLevel span").html(e.level)}UserBeans=o,userGoldAll(o)}},quitGame:function(){isGameGo===!0?initLevel===clickIndex?($("#notStart").show(),$("#letGo,#guessNext #closeGame,#guess button,#goNext").attr("disabled","disabled")):this.bingoGame?(isMaxBeanShow&&($("#maxGoldBean").hide(),$("#backHome #returnGame").attr("disabled","disabled").unbind("click").html("已结束").css({backgroundColor:"#6e6e6e"})),$("#backHome").show(),$("#goNext,#guessNext #closeGame,#guess button,#goNext").attr("disabled","disabled"),$("#backHome #putBeans span").html(Play.putBeans),$("#backHome #outBeans span").html(this.outBeans)):isAndroidIOS()?app.temporaryExit(anyNum):window.webkit.messageHandlers.temporaryExit.postMessage(anyNum):isAndroidIOS()?app.temporaryExit(anyNum):window.webkit.messageHandlers.temporaryExit.postMessage(anyNum)}};$("#recordWindow").scroll(function(){var e=document.body.scrollHeight||document.documentElement.scrollHeight>0?5:30;$(this).scrollTop()+$(this).get(0).offsetHeight>=$(this).get(0).scrollHeight-e&&(pagecount>1?recordPage===pagecount?$(this).unbind("scroll"):recordPage<pagecount&&(recordPage++,isAndroidIOS()?app.pokerGameRecord(recordPage):window.webkit.messageHandlers.pokerGameRecord.postMessage(recordPage)):$(this).unbind("scroll"))}),$("#guessRule").click(function(){$("#ruleWindow").show().transition({bottom:"0"},500,"in-out"),setTimeout(function(){$("#blank-close-rule").show(),$("#recordWindow").hide()},500),$("body").addClass("over"),$("#recordWindow").transition({bottom:"-13.12rem"},500,"in-out"),$("#blank-close-record").hide()}),$("#guessRecord").click(function(){$("#recordWindow").show().transition({bottom:"0"},500,"in-out"),$("body").addClass("over"),setTimeout(function(){$("#blank-close-record").show(),$("#ruleWindow").hide()},500),$("#ruleWindow").transition({bottom:"-13.12rem"},500,"in-out"),$("#blank-close-rule").hide()}),$("#blank-close-rule").click(function(){$("#ruleWindow").transition({bottom:"-13.12rem"},500,"in-out"),setTimeout(function(){$("#ruleWindow").hide(),$("body").removeClass("over")},500),$(this).hide()}),$("#blank-close-record").click(function(){$("#recordWindow").transition({bottom:"-13.12rem"},500,"in-out"),setTimeout(function(){$("#recordWindow").hide(),$("body").removeClass("over")},500),$(this).hide()});var dpr=parseInt($("html").attr("data-dpr")),bodyWidth=document.body.clientWidth;1===dpr&&bodyWidth>=600&&$("#guess").css({width:bodyWidth-296+"px"});